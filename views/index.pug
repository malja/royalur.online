extends layouts/layout

block header
  h1= title
  p Welcome to #{title}

  if logged_in
    p Logged in as #{username}.
    a(href="/logout") Logout
  else
    a(href="/login") Login

block content

  div#games_list
    h2 Open Games
    if games.length !== 0
      table
        tr
          th Player
          th Elo
          th WR
          th Number Of Games
          th Created At
          th Action
        each game in games
          tr
            td= game.player_1.name
            td= game.player_1.elo
            td #{game.player_1.winrate}%
            td= game.player_1.number_of_games
            td= game.created_at
            th
              a(href="/games/" + game.token) Join
    else
      p There are no open games at the moment. Maybe #[a(href="/start") create your own]?

  div#player_list
    h2 Top Players
    if players.length !== 0
      table
        tr
          th Player
          th Elo
          th WR
          th Number Of Games
          th Last Game
        each player in players
          tr
            td= player.name
            td= player.elo
            td= player.winrate
            td= player.number_of_games
            td= player.last_game
    else
      p There are no players in toplist. #[a(href="/login") Create account] and claim your position on the sun!